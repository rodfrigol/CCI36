<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>CCI36 - BIMESTRE 1 - PROJETO 1</title>
		<style>
			body { margin: 0; }
		</style>
	</head>
	<body>
		<script src="js/three.js"></script>
		<script>
            function animate() {
                //requestAnimationFrame( animate );
                raycaster.setFromCamera(pointer, camera);
                console.log(raycaster.intersectObjects(scene.children))
                renderer.render(scene, camera);
            }

            function createElements() {
                let geometry, material, el;
                for(let i = 0; i < elements.length; i++) {
                    if (elements[i].type === "rectangle") {
                        geometry = new THREE.BoxGeometry(elements[i].width, elements[i].height, 1);
                    }
                    material = new THREE.MeshBasicMaterial({ color: elements[i].color });
                    el = new THREE.Mesh(geometry, material);
                    el.rotation.z = elements[i].rotation;
                    el.position.x = elements[i].x;
                    el.position.y = elements[i].y;
                    scene.add(el);
                }
            }

			const scene = new THREE.Scene();

            const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
            camera.position.z = 10;

            const renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);

            const raycaster = new THREE.Raycaster();
            const pointer = new THREE.Vector2();

            const elements = [
                {
                    type: "rectangle",
                    color: 0x00ff00,
                    width: 1,
                    height: 2,
                    rotation: 0,
                    x: 0,
                    y: 0
                }
            ];
            createElements(elements, scene);

            window.addEventListener('pointermove', (e) => {
                pointer.x = (e.clientX / window.innerWidth) * 2 - 1;
	            pointer.y = -(e.clientY / window.innerHeight) * 2 + 1;
            })
            animate(scene, camera, raycaster, camera);
		</script>
	</body>
</html>